{{ 'styles-main-product-nvy.css' | asset_url | stylesheet_tag }}


{% if section.settings.icons_key_feature == 'main_product' %}
  <style>
    .main-taps .main-taps__container-taps .main-taps__container--global .product-nvy__details-features {
      display: none;
    }
  </style>
{% else %}
  <style>
    .shopify-section.product-nvy .product-nvy__details .product-nvy__details-features {
      display: none;
    }
    
    .container-shoppay {
      margin-bottom: 0;
    }
  </style>
{% endif %}


<div class="product-nvy__container">
  <div class="product-nvy__imagen product-nvy__imagen--{{ section.id }}">
    <div class="product-nvy__imagen-slider">
      <div class="product-nvy__imagen-slider-main">
        <button class="btn-slider-main-prev--{{ section.id }} slick-button-custom slick-button-custom--prev">{% render 'icon-preview-arrow' %}</button>
        <div class="product-nvy-main--{{ section.id }}">
          {% for image in product.images %}
            <img src="{{ image | img_url: 'master' }}" alt="{{ product.title }}-{{ forloop.index }}">
          {% endfor %}
        </div>
        <button class="btn-slider-main-next--{{ section.id }} slick-button-custom slick-button-custom--next">{% render 'icon-next-arrow' %}</button>
      </div>
      <div class="product-nvy__imagen-slider-thumbnail">
        <button class="btn-slider-thumbnail-prev--{{ section.id }} slick-button-custom slick-button-custom--prev">{% render 'icon-preview-arrow' %}</button>
        <div class="product-nvy-thumbnail--{{ section.id }}">
          {% for image in product.images %}
            <img src="{{ image | img_url: 'master' }}" alt="{{ product.title }}-{{ forloop.index }}">
          {% endfor %}
        </div>
        <button class="btn-slider-thumbnail-next--{{ section.id }} slick-button-custom slick-button-custom--next">{% render 'icon-next-arrow' %}</button>
      </div>
    </div>
  </div>

  <div class="product-nvy__details">
    <div class="product-nvy__details-main">
      <p class="sku">{{ product.vendor }}</p>
      
      <h1>{{ product.title }}</h1>

      {% comment %}
        <div class='jdgm-widget jdgm-preview-badge' data-id='{{ product.id }}'> 
          {{ product.metafields.judgeme.badge }} 
        </div>   
      {% endcomment %}
      
      
      <p class="price"><span>{{ product.price | money }}</span><b>/ {{ product.metafields.prod.each_pair_text }}</b></p>



      <script>
        $(document).ready(function() {
          var $sectionsVariants = $('.product-nvy__details .container-variant');
          var $emptySections = $sectionsVariants.filter(function() {
              return $(this).find('.container-variant__content').children().length === 0;
          });
          $emptySections.remove();
        });
      </script>
    
      {% if product.metafields.custom.custom_field_1_variants != blank %}
        {% render 'custom-one-variant' %}
      {% endif %}

      {% if product.metafields.custom.custom_field_2_variants != blank %}
        {% render 'custom-two-variant' %}
      {% endif %}

      {% if product.metafields.custom.color_variants != blank %}
        {% render 'color-variant' %}
      {% endif %}

      


      
      <button id="add-to-cart-nvy" onclick="addToCartNVY({{ product.selected_or_first_available_variant.id }})">ADD TO CART</button>

      <div class="container-shoppay">
        <p id="shopify-installments" data-testid="shopify-installments" class="m-0 font-inter">
          <span id="shopify-installments-content" data-testid="shopify-installments-content" class="pr-1.5">Pay as low as <b>$45/mo</b> with
            <div class="inline-flex align-middle text-purple-primary"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 99 25" class="text-inherit h-[14px] w-[59px]"><path fill="currentColor" d="M70.842 7.915h2.25c1.561 0 2.328.642 2.328 1.715 0 1.074-.739 1.715-2.259 1.715h-2.32v-3.43ZM80.525 16.142c-.879 0-1.227-.474-1.227-.948 0-.642.725-.935 2.147-1.102l1.115-.125c-.07 1.227-.892 2.175-2.035 2.175Z"></path><path fill="currentColor" fill-rule="evenodd" d="M65.645.5a3.64 3.64 0 0 0-3.64 3.64V20.7a3.64 3.64 0 0 0 3.64 3.64h29.668a3.64 3.64 0 0 0 3.64-3.64V4.14A3.64 3.64 0 0 0 95.314.5H65.645Zm5.197 16.674v-4.197h2.64c2.412 0 3.695-1.353 3.695-3.402 0-2.05-1.283-3.277-3.695-3.277h-4.341v10.876h1.7Zm9.334.223c1.297 0 2.147-.572 2.538-1.548.112 1.088.767 1.645 2.189 1.269l.014-1.157c-.572.055-.683-.154-.683-.753v-2.845c0-1.673-1.102-2.663-3.138-2.663-2.008 0-3.165 1.004-3.165 2.705h1.562c0-.809.572-1.297 1.576-1.297 1.06 0 1.547.46 1.534 1.255v.363l-1.8.195c-2.021.223-3.137.99-3.137 2.329 0 1.101.781 2.147 2.51 2.147Zm9.906.32c-.711 1.73-1.855 2.245-3.64 2.245h-.766V18.54h.822c.977 0 1.45-.307 1.966-1.185L85.3 9.923h1.757l2.259 5.424 2.008-5.424h1.715l-2.956 7.795Z" clip-rule="evenodd"></path><path fill="currentColor" d="M6.992 11.055c-2.359-.509-3.41-.708-3.41-1.612 0-.85.711-1.274 2.134-1.274 1.25 0 2.165.544 2.839 1.61.05.081.155.11.241.066l2.655-1.335a.186.186 0 0 0 .076-.259c-1.102-1.9-3.137-2.94-5.818-2.94C2.188 5.311 0 7.037 0 9.781c0 2.915 2.664 3.651 5.027 4.16 2.362.51 3.417.709 3.417 1.613s-.769 1.33-2.303 1.33c-1.416 0-2.467-.644-3.102-1.896a.186.186 0 0 0-.251-.082L.14 16.21a.188.188 0 0 0-.083.253c1.051 2.102 3.207 3.285 6.087 3.285 3.668 0 5.885-1.698 5.885-4.527 0-2.83-2.677-3.651-5.037-4.16v-.007ZM21.218 5.311c-1.505 0-2.835.531-3.791 1.477-.06.057-.159.015-.159-.067V.687A.185.185 0 0 0 17.081.5h-3.322a.185.185 0 0 0-.187.187v18.73c0 .104.083.186.187.186h3.322a.185.185 0 0 0 .187-.186V11.2c0-1.587 1.223-2.804 2.87-2.804 1.649 0 2.843 1.191 2.843 2.804v8.216c0 .104.082.186.187.186h3.322a.185.185 0 0 0 .187-.186V11.2c0-3.452-2.274-5.89-5.459-5.89ZM33.415 4.774c-1.803 0-3.493.55-4.706 1.343a.186.186 0 0 0-.06.25l1.464 2.488c.054.089.168.12.257.066a5.853 5.853 0 0 1 3.052-.834c2.899 0 5.03 2.036 5.03 4.726 0 2.292-1.706 3.99-3.868 3.99-1.762 0-2.985-1.022-2.985-2.463 0-.825.352-1.502 1.27-1.98a.183.183 0 0 0 .073-.258l-1.381-2.327a.187.187 0 0 0-.226-.079c-1.85.683-3.15 2.327-3.15 4.533 0 3.338 2.67 5.83 6.396 5.83 4.35 0 7.478-3 7.478-7.303 0-4.612-3.64-7.982-8.644-7.982ZM51.776 5.283c-1.68 0-3.182.62-4.277 1.707a.093.093 0 0 1-.16-.066v-1.31a.185.185 0 0 0-.187-.186h-3.235a.185.185 0 0 0-.188.187v18.702c0 .104.083.186.188.186h3.32a.185.185 0 0 0 .188-.186v-6.133c0-.082.099-.123.16-.07 1.091 1.012 2.536 1.603 4.19 1.603 3.897 0 6.936-3.139 6.936-7.217 0-4.078-3.042-7.217-6.935-7.217Zm-.63 11.266c-2.215 0-3.895-1.754-3.895-4.074S48.928 8.4 51.147 8.4c2.22 0 3.893 1.726 3.893 4.075 0 2.348-1.651 4.074-3.896 4.074h.003Z"></path></svg></div>
          </span>
          <span class="relative inline-flex overflow-hidden">
            <span id="prequalBackupCTA" class="inline-flex items-center">
              <button type="button" aria-haspopup="dialog" id="shopify-installments-cta" data-testid="shopify-installments-cta" class="text-inherit m-0 cursor-pointer border-0 bg-transparent p-0 font-inherit underline">Check your purchasing power</button>
            </span>
          </span>
        </p>
      </div>
      
    </div>


    {% if product.metafields.custom.nvy_key_features %}

      {% assign icons_feature = product.metafields.custom.nvy_key_features.value %}
      {% assign icons_feature_count = 0 %}
      {% for file in icons_feature %}
        {% assign icons_feature_count = forloop.length %}
      {% endfor %}

    
      <div class="product-nvy__details-features product-nvy__details-features--{{ icons_feature_count }}">
        <h3>KEY FEATURES</h3>
        <ul>
          {% for file in product.metafields.custom.nvy_key_features.value %}
            <li>
              <img src="{{ file | img_url: 'master' }}" alt="{{ file.alt | escape }}">
              <p>{{ file.alt }}</p>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    



     <script>
        $(document).ready(function() {
          var $sectionsCompleteSystem = $('.product-nvy__details .complete-the-look');
          var $emptySectionsCompleteSystem = $sectionsCompleteSystem.filter(function() {
              return $(this).find('.complete-the-look__products').children().length === 0;
          });
          $emptySectionsCompleteSystem.remove();
        });
      </script>
  
      {% if product.metafields.custom.complete_your_system %}
        {% render 'complete-your-system' %}
      {% endif %}
    
  </div>
</div>


<script>
  $(document).ready(function() {
    var container = $('.product-nvy__imagen--{{ section.id }}');
    
    container.find('.product-nvy-main--{{ section.id }}').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      dots: false,
      infinite: false,
      autoplay: false,
      asNavFor: container.find('.product-nvy-thumbnail--{{ section.id }}')
    });

    container.find('.product-nvy-thumbnail--{{ section.id }}').slick({
      slidesToShow: 5,
      slidesToScroll: 1,
      infinite: false,
      autoplay: false,
      prevArrow: container.find('.btn-slider-thumbnail-prev--{{ section.id }}'),
      nextArrow: container.find('.btn-slider-thumbnail-next--{{ section.id }}'),
      dots: false,
      asNavFor: container.find('.product-nvy-main--{{ section.id }}'),
      focusOnSelect: true,
      responsive: [
        {
          breakpoint: 1200,
          settings: {
            slidesToShow: 4,
            slidesToScroll: 1
          }
        }
      ]
    });

  });

  function addToCartNVY(id) {
  
      const $button = $(event.target);

      $button.text('ADDING...');
      $button.prop('disabled', true);

      $.ajax({
        type: 'POST',
        url: '/cart/add.js',
        data: {
          id: id,
          quantity: 1
        },
        dataType: 'json',
        success: function() {
          $button.text('ADDED!');
          
          setTimeout(() => {
            $button.text('ADD TO CART');
            $button.prop('disabled', false);
          }, 1000);

          console.log('Productos agregados al carrito con éxito');
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
          $button.text('ERROR');
          setTimeout(() => {
            $button.text('ADD TO CART');
            $button.prop('disabled', false);
          }, 1000);

          console.log('Error al agregar los productos al carrito');
        }
      });
    };
</script>



{% schema %}
  {
    "name": "Product",
    "class": "product-nvy",
    "tag": "section",
    "settings": [
      {
        "type": "radio",
        "id": "icons_key_feature",
        "label": "Key Features",
        "options": [
          {
            "value": "main_product",
            "label": "Main Product"
          },
          {
            "value": "taps",
            "label": "Taps"
          }
        ],
        "default": "main_product"
      }
    ]
  }
{% endschema %}